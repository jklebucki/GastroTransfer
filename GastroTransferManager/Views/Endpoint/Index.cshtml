
@{
    ViewData["Title"] = "Endpoint test";
}

<h1>Moduł testujący usługi LSI</h1>
<hr />
<div class="container">
    <div class="row">
        <div class="col-sm">
            <button id="get-products" type="button" class="btn btn-primary btn-block">Produkty</button>
        </div>
        <div class="col-sm">
            <button id="get-meals" type="button" class="btn btn-primary btn-block">Posiłki</button>
        </div>
        <div class="col-sm">
            <button id="get-products-groups" type="button" class="btn btn-primary btn-block">Grupy produktów</button>
        </div>
    </div>
</div>
<div id="result" class="row justify-content-center"></div>

@section scripts{
    <script>
        $('#get-products').click(function () {
            axios.get('/Endpoint/GetProducts')
                .then(function (response) {
                    showResult(response.data)
                })
                .catch(function (error) {
                    console.log(error);
                })
                .then(function () {
                    console.log("Done!");
                });
        }
        );
        $('#get-meals').click(function () {
            axios.get('/Endpoint/GetMeals')
                .then(function (response) {
                    showResult(response.data)
                })
                .catch(function (error) {
                    console.log(error);
                })
                .then(function () {
                    console.log("Done!");
                });
        }
        );
        $('#get-products-groups').click(function () {
            axios.get('/Endpoint/GetProductsGroups')
                .then(function (response) {
                    showResult(response.data)
                })
                .catch(function (error) {
                    console.log(error);
                })
                .then(function () {
                    console.log("Done!");
                });
        }
        );
        function showResult(data) {
            $('#result').html(() => {
                return data.map(function (item, i) {
                    return (i+1)+ ': ' + item.nazwa + '<br>'
                })
            
            })
        }
    </script>
}